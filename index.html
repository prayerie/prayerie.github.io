<!DOCTYPE html>
<html>

<head>
  <style>
    * {
      -webkit-font-smoothing: none;
      -moz-osx-font-smoothing: unset;
      font-smoothing: unset;
      font-smooth: never;
      -ms-interpolation-mode: nearest-neighbor;
    }

    body {
      margin: 0;
      padding: 20px;
      background: url("https://moya.cafe/13move47.gif");
      background-repeat: repeat;
    }

    .container {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .left-panel {
      width: 300px;
      white-space: nowrap;
    }

    .parseres {
      height: 20px;
      color: red;
      margin-bottom: 5px;
    }

    .input-area {
      white-space: nowrap;
      
      left: 10px;
      width: 400px;
      height: 700px;
      font-family: monospace;
      resize: none;
    }

    .btn-group {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }

    .swatch-list {
      display: flex;
      flex-direction: column;
      gap: 5px;
      width: 400px;
      max-height: 700px;
      overflow-y: auto;
    }

    .swatch {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 5px;
      border: 2px solid transparent;
    }

    .swatch.active {
      border: 2px solid #fff;
    }

    .swatchcol {
      width: 30px;
      height: 30px;
      min-width: 30px;
      min-height: 30px;
      border: 2px solid #000000;
    }

    .swatchlb {
      white-space: nowrap;
    }

    .picker-panel {
      background: #ffffff;
      padding: 10px;
      border: 2px solid #ffffff;
      border-radius: 8px;
    }

    .spectrum-map {
      position: relative;
      width: 200px;
      height: 200px;
      margin-bottom: 10px;
    }

    #spectrum-canvas {
      width: 100%;
      height: 100%;
      cursor: crosshair;
    }

    .color-cursor {
      border-radius: 100%;
      background: #ccc;
      box-sizing: border-box;
      position: absolute;
      pointer-events: none;
      z-index: 2;
      border: 2px solid #fff;
      transition: all 0.2s ease;
    }

    .color-cursor.dragging {
      transition: none;
    }

    #spectrum-cursor {
      width: 30px;
      height: 30px;
      margin-left: -15px;
      margin-top: -15px;
      top: 0;
      left: 0;
    }

    .hue-map {
      position: relative;
      width: 200px;
      height: 20px;
    }

    #hue-canvas {
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    #hue-cursor {
      height: 24px;
      width: 24px;
      margin-top: -2px;
      margin-left: -12px;
      pointer-events: none;
      top: 0;
      left: 0;
    }


    #preview-canvas,
    #preview-canvas-main {
      width: 512px;
      height: 384px;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.2/tinycolor.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
  <center>
    <h1>NITROUSTRACKER THEME TOOL(currently broken and unfinished)</h1>
  </center>
  <center>
    <h3>click on a colour in the list to select it then drag the picker to change that colour</h3>
  </center>
  <div class="container">
    <div class="left-panel">
      <div class="parseres" id="parseres"></div>
      <div style="display: flex; gap: 10px; margin-bottom: 10px;">
        <input type="text" id="theme-name" placeholder="theme name" style="flex: 1;">
        <button onclick="save_theme()">export</button>
      </div>
      <textarea class="input-area" id="input"></textarea>
      <div class="btn-group">
        <button onclick="loadTheme()" id="load-btn">load</button>
        <button onclick="loadDefCols()">reset</button>

        <button onclick="randcols()">randomise</button>
      </div>
      <input type="range" id="hueshifter" value="0" min="0" max="360">
      hue shift : D
      <!-- lock colours that have been decoupled but in stock nt theme use the same value, so changing one changes the other -->
      <label><input type="checkbox" id="cb_lock" onchange="lockcols = this.checked"> lck</label>
    </div>
    <div id="hueandpickercol" style="display: flex; flex-direction: column;">
      <div class="swatch-list" id="swatches" style="display: flex;border: 1px solid #000;"></div>
      <div class="picker-panel" style="width: 200px; margin: 0 auto;" >
        <div class="spectrum-map">
          <div id="spectrum-cursor" class="color-cursor"></div>
          <canvas id="spectrum-canvas" width="200" height="200"></canvas>
        </div>
        <div class="hue-map">
          <div id="hue-cursor" class="color-cursor"></div>
          <canvas id="hue-canvas" width="200" height="20"></canvas>
        </div>
      </div>
    </div>


    <!-- Worlds shittest DS: -->
    <div id="nds" style="display: flex; gap: 10px; top: -30px;">
      <div class="preview-panel" style="position: absolute; right: 50px; top: 150px;">
        <canvas id="preview-canvas-main" width="512" height="384"></canvas>
      </div>
      <div class="preview-panel" style="position: absolute; right: 50px; top: 534px;">
        <canvas id="preview-canvas" width="512" height="384"></canvas>
      </div>
    </div>
  </div>

  <script src='./tobkit.js.min'></script>
</body>

</html>
